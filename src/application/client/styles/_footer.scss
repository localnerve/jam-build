// -------------
// footer.scss
//
// Jam-build, a web application practical reference.
// Copyright (c) 2025 Alex Grant <info@localnerve.com>, LocalNerve LLC
// 
// This file is part of Jam-build.
// Jam-build is free software: you can redistribute it and/or modify it
// under the terms of the GNU Affero General Public License as published by the Free Software
// Foundation, either version 3 of the License, or (at your option) any later version.
// Jam-build is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
// without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
// See the GNU Affero General Public License for more details.
// You should have received a copy of the GNU Affero General Public License along with Jam-build.
// If not, see <https://www.gnu.org/licenses/> 
// -------------
@use 'vars' as v;
@use 'colors' as c;
@use 'mixins' as m;
@use 'logo' as l;

.ln-footer {
  position: relative;
  display: flex;
  flex-flow: column nowrap;
  justify-content: space-evenly;
  align-items: center;

  // This is at this position in source order so theme colors override logo-block
  .f-logo {
    @include l.logo-block;

    // Keep old sass behavior for properties that appear after nested rules [mixed-decls]
    // These override the logo-block output above
    & { // stylelint-disable-line block-no-redundant-nested-style-rules,no-duplicate-selectors
      margin: inherit;
      width: 100%;
    }
  
    @include m.breakpoint (medium) {
      align-items: flex-start;
      width: auto;
      margin-right: 1rem;
      min-width: 10em;
    }

    @include m.breakpoint (medium-large) {
      --logo-size: 3;

      margin-right: 3em;

      .logo-tag {
        font-size: 0.9em;
      }
    }

    .links {
      margin-top: 1rem;
      display: flex;
      flex-flow: row nowrap;
      justify-content: space-around;
      align-items: center;
      width: 100%;

      a {
        color: inherit;
        fill: inherit;
      }
    }

    .icon-in {
      border-radius: 50%;
      border: 1px solid var(--site-color);
    }
  }
  
  &.zag-follow {
    padding-top: 18vw;
    margin-top: -17vw;
  }

  &.zag-top {
    // stylelint-disable-next-line plugin/no-unsupported-browser-features
    clip-path: polygon(0% 0%, 33% 3vw, calc(33% - 3vw) 0%, 67% 3vw, calc(67% - 3vw) 0%, 100% 3vw, 100% 100%, 0% 100%);
    margin-top: -5vw;
    padding-top: 6vw;
    z-index: v.$z-index-footer;
  }

  &.dark {
    background: c.$footer-deco-color;
    color: c.$site-white;

    a { // stylelint-disable-line no-descending-specificity
      color: c.$site-white;
    }

    a:focus {
      filter: drop-shadow(0 0 8px c.$link-focus-light);
    }
  
    .logo {
      .nl {
        color: c.$logo-blue-light;
      }

      .nr {
        color: c.$logo-red-light;
      }

      .symbol {
        fill: c.$logo-red-light;
      }
    }
  
    .icon-in {
      border-color: c.$site-white;
    }

    .navigation .active {
      // stylelint-disable-next-line plugin/no-unsupported-browser-features
      background-image: linear-gradient(c.$site-white, c.$site-white);

      @supports not (background-image: linear-gradient(c.$site-white, c.$site-white)) {
        background-image: image-url('site-white.svg');
        background-size: 100%;
      }
    }
  }

  &.light {
    background: var(--site-bg);
    color: var(--site-color);

    .navigation .active {
      // stylelint-disable-next-line plugin/no-unsupported-browser-features
      background-image: linear-gradient(c.$color-nav-active-background, c.$color-nav-active-background);

      @supports not (background-image: linear-gradient(c.$color-nav-active-background, c.$color-nav-active-background)) {
        background-image: image-url('site-text.svg');
        background-size: 100%;
      }
    }
  }

  &.dark, &.light {
    .navigation .active {
      @media (prefers-color-scheme: dark) {
        // stylelint-disable-next-line plugin/no-unsupported-browser-features
        background-image: linear-gradient(c.$color-nav-dark, c.$color-nav-dark);
      }
    }
  }
  
  & > *,
  .business > *:not(:last-child) {
    margin-bottom: 1em;
  }

  .business {
    display: flex;
    flex-flow: row wrap;
    justify-content: center;
    align-items: center;
    
    a[itemprop='legalName'] {
      display: none;
    }

    .contact {
      margin-left: 2em;
      line-height: 2;
    }
  }

  .copyright {
    display: flex;
    flex-flow: row wrap;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 0 0.5em;
    line-height: 2;
    font-size: smaller;

    & > span {
      white-space: nowrap;
    }

    & > span:not(:last-child)::after {
      content: 'â€¢';
      padding: 0 0.25rem;
    }
  }
}

.no-js .ln-footer .copyright span:not(:last-child)::after {
  content: '';
  padding: 0;
}

.no-nav .ln-footer .business {
  @include m.breakpoint (medium-large) {
    margin-top: 1em;
  }
}